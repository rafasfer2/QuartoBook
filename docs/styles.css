/* Custom CSS for QuartoBook - ABNT-like formatting */

/* --------------------------------------------------
   Paleta de Cores do Projeto
   #543005 #8c510a #bf812d #dfc27d #f6e8c3
   #c7eae5 #80cdc1 #35978f #01665e #003c30
   Aplicação principal: sidebar (#35978f) com texto claro
   -------------------------------------------------- */
:root {
  --color-brown-dark: #543005;
  --color-brown-med: #8c510a;
  --color-brown: #bf812d;
  --color-brown-light: #dfc27d;
  --color-cream: #f6e8c3;
  --color-cyan-light: #c7eae5;
  --color-cyan-mid: #80cdc1;
  --color-teal: #35978f; /* sidebar background */
  --color-teal-dark: #01665e;
  --color-teal-deep: #003c30;
  --color-accent: var(--color-brown);
  --color-accent-hover: var(--color-brown-light);
  --color-sidebar-text: var(--color-cream);
  --color-sidebar-muted: var(--color-cyan-light);
  --color-sidebar-active-bg: var(--color-cyan-mid);
  --color-sidebar-active-text: var(--color-brown-dark);
}

/* Body text formatting */
body {
  font-family: 'Times New Roman', Times, serif;
  font-size: 12pt;
  line-height: 1.5;
  text-align: justify;
}

/* Paragraph indentation */
.quarto-title-block ~ * p,
.chapter-content p,
main p {
  text-indent: 1.25cm;
  margin-bottom: 0;
  text-align: justify;
}

/* Remove indentation from first paragraph after headings */
h1 + p,
h2 + p,
h3 + p,
h4 + p,
h5 + p,
h6 + p,
.callout p:first-child {
  text-indent: 0;
}

/* Headings */
h1, h2, h3, h4, h5, h6 {
  font-family: 'Times New Roman', Times, serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.5em;
  margin-bottom: 0.75em;
  letter-spacing: .5px;
}

h1 {
  font-size: 18pt;
  color: var(--color-brown-dark);
  border-bottom: 2px solid var(--color-brown);
  padding-bottom: 4px;
}

h2 {
  font-size: 16pt;
  color: var(--color-brown-med);
}

h3 {
  font-size: 14pt;
  color: var(--color-brown);
}

h4, h5, h6 {
  font-size: 12pt;
  color: var(--color-teal-deep);
}

/* Code blocks - maintain monospace */
pre, code {
  font-family: 'Courier New', Courier, monospace;
  text-align: left;
}

pre p {
  text-indent: 0;
}

/* Lists */
ul, ol {
  text-align: justify;
  margin-left: 1.25cm;
}

li p {
  text-indent: 0;
}

/* Block quotes */
blockquote {
  margin-left: 4cm;
  margin-right: 0;
  font-size: 11pt;
  text-align: justify;
}

blockquote p {
  text-indent: 0;
}

/* Tables */
table {
  font-size: 11pt;
  margin: 1em auto;
}

table p {
  text-indent: 0;
  text-align: left;
}

/* Figures */
figure {
  text-align: center;
  margin: 1em 0;
}

figcaption {
  font-size: 11pt;
  text-align: center;
  font-weight: bold;
  margin-top: 0.5em;
  background: linear-gradient(90deg,var(--color-cyan-mid)10%,var(--color-cyan-light)90%);
  padding: 4px 8px;
  border-radius: 4px;
}

/* References section */
#refs {
  text-align: left;
}

#refs p {
  text-indent: 0;
  margin-left: 0;
  padding-left: 0;
}

/* Callout boxes - no indentation */
.callout {
  text-align: left;
}

.callout p {
  text-indent: 0;
}

/* Table of Contents - hierarchical indentation */
.sidebar-navigation {
  padding-left: 0.5em !important;
  padding-right: 0.5em !important;
}

nav[role="doc-toc"] ul ul,
#TOC ul ul,
.sidebar nav[role="navigation"] ul ul {
  padding-left: 1em !important; /* nível 2 */
}

nav[role="doc-toc"] ul ul ul,
#TOC ul ul ul,
.sidebar nav[role="navigation"] ul ul ul {
  padding-left: 1.5em !important; /* nível 3 */
}

/* Remove extra indentation from chapter items */
.sidebar .chapter > a,
.sidebar .sidebar-item > a {
  padding-left: 0 !important;
  margin-left: 0 !important;
}


nav[role="doc-toc"] li,
#TOC li,
.sidebar nav[role="navigation"] li {
  margin-bottom: 0.3em;
  margin-left: 0 !important;
  padding-left: 0 !important;
}

.sidebar nav[role="doc-toc"] ul {
  padding-left: 0.5em !important;
}

/* Increase sidebar width and fix main content position */
.sidebar {
  width: 300px !important;
  max-width: 300px !important;
  position: fixed !important;
  left: 0 !important;
  top: 0 !important;
  height: 100vh !important;
  overflow-y: auto !important;
  background: var(--color-teal) !important;
  color: var(--color-sidebar-text) !important;
  border-right: 4px solid var(--color-teal-dark);
  box-shadow: 2px 0 6px rgba(0,0,0,0.2);
}

/* Adjust main content to not overlap with sidebar */
body.nav-sidebar {
  padding-left: 0 !important;
}

.page-columns {
  margin-left: 320px !important;
  padding-left: 1em !important;
}

main.content {
  margin-left: 0 !important;
}

/* Adjust font size for better fit */
.sidebar nav a {
  font-size: 0.9rem;
  line-height: 1.3;
  word-wrap: break-word;
  hyphens: auto;
  display: block;
  padding: 4px 10px;
  color: var(--color-sidebar-text) !important;
  text-decoration: none;
  border-radius: 4px;
  transition: background .15s ease, color .15s ease;
}

.sidebar nav a:hover {
  background: var(--color-teal-dark);
  color: var(--color-accent-hover) !important;
  text-decoration: none;
}

/* Reduce chapter number spacing */
.sidebar .chapter-number {
  margin-right: 0.3em;
}

/* Sidebar expandable/collapsible sections */
.sidebar .sidebar-section-container {
  margin-bottom: 0.5em;
}

.sidebar .chapter.sidebar-section-item {
  padding-left: 0 !important;
}

.sidebar .sidebar-section .sidebar-section-item a {
  font-size: 0.9rem;
}

/* Highlight current page in sidebar */
.sidebar .active {
  font-weight: bold;
  border-left: 4px solid var(--color-accent);
  background: var(--color-sidebar-active-bg);
  color: var(--color-sidebar-active-text) !important;
  padding-left: 6px !important;
}

/* Sidebar collapse icons */
.sidebar .chapter-number::before,
.sidebar-item-toggle {
  margin-right: 0.3em;
}

/* Estado do toggle (quando expandido) - ícones herdados do Quarto */
.sidebar-item-toggle { color: var(--color-sidebar-muted); }
.sidebar-item-toggle:hover { color: var(--color-accent-hover); }

/* Separadores e títulos de parte */
.sidebar .sidebar-section-header, .sidebar .sidebar-item .part {
  font-weight: bold;
  color: var(--color-sidebar-muted);
  text-transform: uppercase;
  font-size: 0.7rem;
  letter-spacing: 0.05em;
  padding: 6px 10px 2px;
}

/* Foco via teclado acessível */
.sidebar nav a:focus {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}

/* Scrollbar estilizada (webkit) */
.sidebar::-webkit-scrollbar { width: 8px; }
.sidebar::-webkit-scrollbar-track { background: var(--color-teal-deep); }
.sidebar::-webkit-scrollbar-thumb { background: var(--color-teal-dark); border-radius: 4px; }
.sidebar::-webkit-scrollbar-thumb:hover { background: var(--color-accent); }

/* Ajuste das cores de links fora do sidebar (conteúdo) */
main a { color: var(--color-brown-med); }
main a:hover { color: var(--color-brown-light); }
main a:active { color: var(--color-teal-dark); }
main a:visited { color: var(--color-brown); }

/* Callouts harmonizados com a paleta */
.callout-note { border-left: 4px solid var(--color-teal-dark); }
.callout-important { border-left: 4px solid var(--color-brown-med); }
.callout-warning { border-left: 4px solid var(--color-brown); }
.callout-tip { border-left: 4px solid var(--color-teal); }

/* Tabela cabeçalho */
table thead tr { background: var(--color-cyan-mid); }
table thead th { color: var(--color-brown-dark); }
table tbody tr:nth-child(even){ background: var(--color-cyan-light); }
table tbody tr:nth-child(odd){ background: #ffffff; }

/* Figcaption tonalidade */
figcaption { color: var(--color-brown-dark); }

/* Syntax highlighting overrides (light theme focus) */
pre code, code { background: transparent; }
.code span.kw, pre code .kw { color: var(--color-teal-dark); font-weight: bold; }
.code span.fu, pre code .fu { color: var(--color-brown-med); }
.code span.st, pre code .st { color: var(--color-teal); }
.code span.co, pre code .co { color: var(--color-cyan-mid); font-style: italic; }
.code span.op, pre code .op { color: var(--color-brown); }
.code span.va, pre code .va { color: var(--color-teal-deep); }
.code span.cn, pre code .cn { color: var(--color-brown-light); }
.code span.at, pre code .at { color: var(--color-teal-dark); }
.code span.er, pre code .er { background: #ffdddd; color: #a60000; }

/* Inline code emphasis */
p code, li code { background: var(--color-cyan-light); padding: 2px 4px; border-radius: 3px; }



/* Print-specific adjustments */
@media print {
  body {
    font-size: 12pt;
    line-height: 1.5;
  }

  a {
    color: black;
    text-decoration: none;
  }

  /* Ensure page breaks */
  h1, h2 {
    page-break-after: avoid;
  }

  figure, table {
    page-break-inside: avoid;
  }
}
