# Instala√ß√£o e Ambiente {.unnumbered}

Este cap√≠tulo fornece instru√ß√µes detalhadas para configurar o ambiente de trabalho necess√°rio para reproduzir os exemplos deste livro.

## Instala√ß√£o do R

### Windows

1. Acesse [https://cran.r-project.org/bin/windows/base/](https://cran.r-project.org/bin/windows/base/)
2. Baixe o instalador mais recente (ex: `R-4.5.1-win.exe`)
3. Execute o instalador e siga as instru√ß√µes padr√£o

### macOS

1. Acesse [https://cran.r-project.org/bin/macosx/](https://cran.r-project.org/bin/macosx/)
2. Baixe o arquivo `.pkg` apropriado para sua vers√£o do macOS
3. Execute o instalador

### Linux (Ubuntu/Debian)

```bash
# Adicionar reposit√≥rio CRAN
sudo apt update
sudo apt install -y software-properties-common dirmngr
wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | sudo tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc

# Adicionar reposit√≥rio
sudo add-apt-repository "deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/"

# Instalar R
sudo apt update
sudo apt install -y r-base r-base-dev
```

### Verificar Instala√ß√£o

Abra um terminal ou prompt de comando e execute:

```bash
R --version
```

Voc√™ deve ver algo como:

```
R version 4.5.1 (2024-06-14) -- "Beagle Scouts"
```

## Instala√ß√£o do RStudio Desktop

RStudio √© o IDE (Ambiente de Desenvolvimento Integrado) mais popular para R.

1. Acesse [https://posit.co/download/rstudio-desktop/](https://posit.co/download/rstudio-desktop/)
2. Baixe o instalador para seu sistema operacional
3. Execute o instalador

## Instala√ß√£o do Quarto

Quarto √© o sistema de publica√ß√£o utilizado para criar este livro.

### Windows

1. Acesse [https://quarto.org/docs/get-started/](https://quarto.org/docs/get-started/)
2. Baixe o instalador `.msi` para Windows
3. Execute o instalador

### macOS

```bash
# Via Homebrew
brew install --cask quarto
```

Ou baixe o instalador `.pkg` do site oficial.

### Linux

```bash
# Ubuntu/Debian
wget https://github.com/quarto-dev/quarto-cli/releases/download/v1.6.39/quarto-1.6.39-linux-amd64.deb
sudo dpkg -i quarto-1.6.39-linux-amd64.deb
```

### Verificar Instala√ß√£o

```bash
quarto --version
```

## Instala√ß√£o de Pacotes R

### Pacotes Essenciais

Abra o R ou RStudio e execute:

```{r}
#| eval: false
#| echo: true

# Manipula√ß√£o e visualiza√ß√£o de dados
install.packages("tidyverse")  # Inclui dplyr, tidyr, ggplot2, readr, etc.

# An√°lise de confiabilidade e sobreviv√™ncia
install.packages("survival")
install.packages("flexsurv")
install.packages("WeibullR")

# Tabelas e relat√≥rios
install.packages("knitr")
install.packages("kableExtra")
install.packages("DT")
install.packages("broom")

# Visualiza√ß√£o avan√ßada
install.packages("plotly")
install.packages("patchwork")
```

### Pacotes para Manuten√ß√£o Preditiva

```{r}
#| eval: false
#| echo: true

install.packages("caret")        # Machine learning
install.packages("randomForest") # Random Forest
install.packages("prophet")      # S√©ries temporais (Facebook Prophet)
install.packages("anomalize")    # Detec√ß√£o de anomalias
```

### Instala√ß√£o via Script

Para instalar todos os pacotes de uma vez, crie o arquivo `resources/install_packages.R`:

```{r}
#| eval: false
#| echo: true

# Script de instala√ß√£o completa
packages <- c(
  # Manipula√ß√£o de dados
  "tidyverse", "dplyr", "tidyr", "readr", "lubridate",

  # Visualiza√ß√£o
  "ggplot2", "plotly", "patchwork", "ggthemes",

  # Confiabilidade e sobreviv√™ncia
  "survival", "flexsurv", "WeibullR", "reliability",

  # Tabelas e reports
  "knitr", "kableExtra", "DT", "broom", "gt",

  # Machine learning
  "caret", "randomForest", "xgboost",

  # S√©ries temporais
  "prophet", "anomalize", "forecast",

  # Simula√ß√£o
  "simmer", "MASS"
)

# Verificar e instalar apenas os que faltam
new_packages <- packages[!(packages %in% installed.packages()[,"Package"])]
if(length(new_packages)) install.packages(new_packages)

cat("Pacotes instalados com sucesso!\n")
```

Execute no R:

```{r}
#| eval: false
#| echo: true

source("resources/install_packages.R")
```

## Configura√ß√£o do Ambiente

### Arquivo `.Rprofile`

Crie um arquivo `.Rprofile` na raiz do projeto para configura√ß√µes globais:

```r
# .Rprofile
options(
  repos = c(CRAN = "https://cloud.r-project.org/"),
  scipen = 999,           # Desabilitar nota√ß√£o cient√≠fica
  stringsAsFactors = FALSE,
  max.print = 100
)

# Carregar pacotes frequentes automaticamente
if (interactive()) {
  suppressMessages({
    library(tidyverse)
    library(here)
  })
  cat("\n Ambiente R configurado! \n\n")
}
```

### Arquivo `.Renviron`

Para vari√°veis de ambiente (ex: chaves de API):

```bash
# .Renviron
R_MAX_NUM_DLLS=300
```

## VS Code (Alternativa ao RStudio)

Se preferir usar VS Code:

### Extens√µes Necess√°rias

1. **R** (REditorSupport.r)
2. **Quarto** (quarto.quarto)
3. **R Debugger** (RDebugger.r-debugger)

### Configura√ß√£o

Crie `.vscode/settings.json`:

```json
{
  "r.rterm.windows": "C:\\Program Files\\R\\R-4.5.1\\bin\\R.exe",
  "r.rterm.linux": "/usr/bin/R",
  "r.rterm.mac": "/usr/local/bin/R",
  "r.bracketedPaste": true,
  "r.sessionWatcher": true,
  "quarto.render.renderOnSave": false
}
```

## Verifica√ß√£o Final

Execute o seguinte script para verificar se tudo est√° configurado:

```{r}
#| eval: false
#| echo: true

# Verificar vers√£o do R
cat("R version:", R.version.string, "\n")

# Verificar pacotes principais
required_packages <- c("tidyverse", "survival", "ggplot2", "knitr")
missing <- required_packages[!sapply(required_packages, requireNamespace, quietly = TRUE)]

if (length(missing) == 0) {
  cat(" Todos os pacotes necess√°rios est√£o instalados!\n")
} else {
  cat(" Pacotes faltando:", paste(missing, collapse = ", "), "\n")
}

# Verificar Quarto (via terminal)
system("quarto --version")
```

## Estrutura de Projeto Recomendada

Organize seus arquivos assim:

```
QuartoBook/
‚îú‚îÄ‚îÄ .Rprofile              # Configura√ß√µes R
‚îú‚îÄ‚îÄ .Renviron              # Vari√°veis de ambiente
‚îú‚îÄ‚îÄ _quarto.yml            # Configura√ß√£o Quarto
‚îú‚îÄ‚îÄ chapters/              # Cap√≠tulos
‚îú‚îÄ‚îÄ appendices/            # Ap√™ndices
‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îú‚îÄ‚îÄ data/              # Dados (.csv, .rds)
‚îÇ   ‚îú‚îÄ‚îÄ scripts/           # Scripts R auxiliares
‚îÇ   ‚îî‚îÄ‚îÄ images/            # Figuras
‚îî‚îÄ‚îÄ docs/                  # Output renderizado
```

## Pr√≥ximos Passos

Agora que seu ambiente est√° configurado:

1. Clone ou baixe os materiais do livro
2. Abra o projeto no RStudio ou VS Code
3. Execute `quarto preview` para visualizar o livro
4. Comece pelo Cap√≠tulo 1: Fundamentos de Confiabilidade

---

üîî **Dica:** Mantenha seus pacotes R atualizados com:

```{r}
#| eval: false
#| echo: true

update.packages(ask = FALSE)
```

‚úÖ **Ambiente configurado! Voc√™ est√° pronto para come√ßar!**
